{"ast":null,"code":"import _asyncToGenerator from \"/home/jake/SRC/landing-page/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/home/jake/SRC/landing-page/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/jake/SRC/landing-page/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/home/jake/SRC/landing-page/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nexport var CustomDataLink = /*#__PURE__*/function () {\n  function CustomDataLink(customData) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$failOnMiss = _ref.failOnMiss,\n        failOnMiss = _ref$failOnMiss === void 0 ? true : _ref$failOnMiss,\n        _ref$loadForever = _ref.loadForever,\n        loadForever = _ref$loadForever === void 0 ? false : _ref$loadForever;\n\n    _classCallCheck(this, CustomDataLink);\n\n    _defineProperty(this, \"failOnMiss\", void 0);\n\n    _defineProperty(this, \"loadForever\", void 0);\n\n    _defineProperty(this, \"data\", void 0);\n\n    this.data = customData;\n    this.failOnMiss = failOnMiss;\n    this.loadForever = loadForever;\n  }\n\n  _createClass(CustomDataLink, [{\n    key: \"executeResourceQuery\",\n    value: function () {\n      var _executeResourceQuery = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(type, query, options) {\n        var customResource, result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.loadForever) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", new Promise(function () {\n                  return undefined;\n                }));\n\n              case 2:\n                customResource = this.data[query.resource];\n\n                if (!(customResource === undefined)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                if (!this.failOnMiss) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new Error(\"No data provided for resource type \".concat(query.resource, \"!\"));\n\n              case 6:\n                return _context.abrupt(\"return\", Promise.resolve(null));\n\n              case 7:\n                _context.t0 = typeof customResource;\n                _context.next = _context.t0 === 'string' ? 10 : _context.t0 === 'number' ? 10 : _context.t0 === 'boolean' ? 10 : _context.t0 === 'object' ? 10 : _context.t0 === 'function' ? 11 : 17;\n                break;\n\n              case 10:\n                return _context.abrupt(\"return\", customResource);\n\n              case 11:\n                _context.next = 13;\n                return customResource(type, query, options);\n\n              case 13:\n                result = _context.sent;\n\n                if (!(typeof result === 'undefined' && this.failOnMiss)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                throw new Error(\"The custom function for resource \".concat(query.resource, \" must always return a value but returned \").concat(result));\n\n              case 16:\n                return _context.abrupt(\"return\", result || null);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function executeResourceQuery(_x, _x2, _x3) {\n        return _executeResourceQuery.apply(this, arguments);\n      }\n\n      return executeResourceQuery;\n    }()\n  }]);\n\n  return CustomDataLink;\n}();","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","CustomDataLink","customData","failOnMiss","loadForever","data","type","query","options","Promise","undefined","customResource","resource","Error","concat","resolve","result"],"sources":["/home/jake/SRC/landing-page/node_modules/@dhis2/app-runtime/node_modules/@dhis2/app-service-data/build/es/links/CustomDataLink.js"],"sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class CustomDataLink {\n  constructor(customData, {\n    failOnMiss = true,\n    loadForever = false\n  } = {}) {\n    _defineProperty(this, \"failOnMiss\", void 0);\n\n    _defineProperty(this, \"loadForever\", void 0);\n\n    _defineProperty(this, \"data\", void 0);\n\n    this.data = customData;\n    this.failOnMiss = failOnMiss;\n    this.loadForever = loadForever;\n  }\n\n  async executeResourceQuery(type, query, options) {\n    if (this.loadForever) {\n      return new Promise(() => undefined);\n    }\n\n    const customResource = this.data[query.resource];\n\n    if (customResource === undefined) {\n      if (this.failOnMiss) {\n        throw new Error(\"No data provided for resource type \".concat(query.resource, \"!\"));\n      }\n\n      return Promise.resolve(null);\n    }\n\n    switch (typeof customResource) {\n      case 'string':\n      case 'number':\n      case 'boolean':\n      case 'object':\n        return customResource;\n\n      case 'function':\n        {\n          const result = await customResource(type, query, options);\n\n          if (typeof result === 'undefined' && this.failOnMiss) {\n            throw new Error(\"The custom function for resource \".concat(query.resource, \" must always return a value but returned \").concat(result));\n          }\n\n          return result || null;\n        }\n    }\n  }\n\n}"],"mappings":";;;;;AAAA,SAASA,eAAT,CAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,KAAnC,EAA0C;EAAE,IAAID,GAAG,IAAID,GAAX,EAAgB;IAAEG,MAAM,CAACC,cAAP,CAAsBJ,GAAtB,EAA2BC,GAA3B,EAAgC;MAAEC,KAAK,EAAEA,KAAT;MAAgBG,UAAU,EAAE,IAA5B;MAAkCC,YAAY,EAAE,IAAhD;MAAsDC,QAAQ,EAAE;IAAhE,CAAhC;EAA0G,CAA5H,MAAkI;IAAEP,GAAG,CAACC,GAAD,CAAH,GAAWC,KAAX;EAAmB;;EAAC,OAAOF,GAAP;AAAa;;AAEjN,WAAaQ,cAAb;EACE,wBAAYC,UAAZ,EAGQ;IAAA,+EAAJ,EAAI;IAAA,2BAFNC,UAEM;IAAA,IAFNA,UAEM,gCAFO,IAEP;IAAA,4BADNC,WACM;IAAA,IADNA,WACM,iCADQ,KACR;;IAAA;;IACNZ,eAAe,CAAC,IAAD,EAAO,YAAP,EAAqB,KAAK,CAA1B,CAAf;;IAEAA,eAAe,CAAC,IAAD,EAAO,aAAP,EAAsB,KAAK,CAA3B,CAAf;;IAEAA,eAAe,CAAC,IAAD,EAAO,MAAP,EAAe,KAAK,CAApB,CAAf;;IAEA,KAAKa,IAAL,GAAYH,UAAZ;IACA,KAAKC,UAAL,GAAkBA,UAAlB;IACA,KAAKC,WAAL,GAAmBA,WAAnB;EACD;;EAdH;IAAA;IAAA;MAAA,qFAgBE,iBAA2BE,IAA3B,EAAiCC,KAAjC,EAAwCC,OAAxC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACM,KAAKJ,WADX;kBAAA;kBAAA;gBAAA;;gBAAA,iCAEW,IAAIK,OAAJ,CAAY;kBAAA,OAAMC,SAAN;gBAAA,CAAZ,CAFX;;cAAA;gBAKQC,cALR,GAKyB,KAAKN,IAAL,CAAUE,KAAK,CAACK,QAAhB,CALzB;;gBAAA,MAOMD,cAAc,KAAKD,SAPzB;kBAAA;kBAAA;gBAAA;;gBAAA,KAQQ,KAAKP,UARb;kBAAA;kBAAA;gBAAA;;gBAAA,MASY,IAAIU,KAAJ,CAAU,sCAAsCC,MAAtC,CAA6CP,KAAK,CAACK,QAAnD,EAA6D,GAA7D,CAAV,CATZ;;cAAA;gBAAA,iCAYWH,OAAO,CAACM,OAAR,CAAgB,IAAhB,CAZX;;cAAA;gBAAA,cAeU,OAAOJ,cAfjB;gBAAA,gCAgBS,QAhBT,wBAiBS,QAjBT,wBAkBS,SAlBT,wBAmBS,QAnBT,wBAsBS,UAtBT;gBAAA;;cAAA;gBAAA,iCAoBaA,cApBb;;cAAA;gBAAA;gBAAA,OAwB6BA,cAAc,CAACL,IAAD,EAAOC,KAAP,EAAcC,OAAd,CAxB3C;;cAAA;gBAwBcQ,MAxBd;;gBAAA,MA0BY,OAAOA,MAAP,KAAkB,WAAlB,IAAiC,KAAKb,UA1BlD;kBAAA;kBAAA;gBAAA;;gBAAA,MA2BgB,IAAIU,KAAJ,CAAU,oCAAoCC,MAApC,CAA2CP,KAAK,CAACK,QAAjD,EAA2D,2CAA3D,EAAwGE,MAAxG,CAA+GE,MAA/G,CAAV,CA3BhB;;cAAA;gBAAA,iCA8BeA,MAAM,IAAI,IA9BzB;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAhBF;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;;EAAA;AAAA"},"metadata":{},"sourceType":"module"}