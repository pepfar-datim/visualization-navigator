"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mergeAndCompareVariables = void 0;

var _stableVariablesHash = require("./stableVariablesHash");

const mergeAndCompareVariables = (previousVariables, newVariables, previousHash) => {
  if (!newVariables) {
    return {
      identical: true,
      mergedVariablesHash: previousHash,
      mergedVariables: previousVariables
    };
  } // Use cached hash if it exists


  const currentHash = previousHash || (0, _stableVariablesHash.stableVariablesHash)(previousVariables);
  const mergedVariables = { ...previousVariables,
    ...newVariables
  };
  const mergedVariablesHash = (0, _stableVariablesHash.stableVariablesHash)(mergedVariables);
  const identical = currentHash === mergedVariablesHash;
  return {
    identical,
    mergedVariablesHash,
    mergedVariables
  };
};

exports.mergeAndCompareVariables = mergeAndCompareVariables;