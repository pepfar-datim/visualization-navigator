{"ast":null,"code":"import { filtersToUrl } from \"../../searchFilters/types/filtersToUrl.service\";\nimport datimApi from \"@pepfar-react-lib/datim-api\";\n\nfunction responseToModel(response) {\n  return response.listGrid.rows.map(row => ({\n    type: row[4],\n    name: row[1],\n    views: parseInt(row[2]),\n    lastViewed: row[3],\n    owner: row[5],\n    sql: row[6]\n  }));\n}\n\nexport function searchVisualizations(searchFilters) {\n  let fullUrl = `/sqlViews/VisNavgSrch/data?var=${filtersToUrl(searchFilters)},limit:100`;\n  return datimApi.getJson(fullUrl).then(responseToModel);\n}","map":{"version":3,"names":["filtersToUrl","datimApi","responseToModel","response","listGrid","rows","map","row","type","name","views","parseInt","lastViewed","owner","sql","searchVisualizations","searchFilters","fullUrl","getJson","then"],"sources":["/home/jake/SRC/visualization-navigator-ts/src/modules/searchPage/services/searchVisualizations.service.ts"],"sourcesContent":["import {ServerResponse, SqlType, Visualization, VisualizationType} from \"../types/visualization.type\";\nimport {SearchFilter} from \"../../searchFilters/types/searchFilters.type\";\nimport {filtersToUrl} from \"../../searchFilters/types/filtersToUrl.service\";\nimport datimApi from \"@pepfar-react-lib/datim-api\";\n\nfunction responseToModel(response:ServerResponse):Visualization[]{\n    return response.listGrid.rows.map(row=>({\n        type: row[4] as VisualizationType,\n        name: row[1],\n        views: parseInt(row[2]),\n        lastViewed: row[3],\n        owner: row[5],\n        sql: row[6] as SqlType\n    }))\n}\n\nexport function searchVisualizations(searchFilters:SearchFilter[]):Promise<Visualization[]>{\n    let fullUrl:string = `/sqlViews/VisNavgSrch/data?var=${filtersToUrl(searchFilters)},limit:100`\n    return datimApi.getJson(fullUrl).then(responseToModel);\n}"],"mappings":"AAEA,SAAQA,YAAR,QAA2B,gDAA3B;AACA,OAAOC,QAAP,MAAqB,6BAArB;;AAEA,SAASC,eAAT,CAAyBC,QAAzB,EAAiE;EAC7D,OAAOA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,CAAuBC,GAAvB,CAA2BC,GAAG,KAAG;IACpCC,IAAI,EAAED,GAAG,CAAC,CAAD,CAD2B;IAEpCE,IAAI,EAAEF,GAAG,CAAC,CAAD,CAF2B;IAGpCG,KAAK,EAAEC,QAAQ,CAACJ,GAAG,CAAC,CAAD,CAAJ,CAHqB;IAIpCK,UAAU,EAAEL,GAAG,CAAC,CAAD,CAJqB;IAKpCM,KAAK,EAAEN,GAAG,CAAC,CAAD,CAL0B;IAMpCO,GAAG,EAAEP,GAAG,CAAC,CAAD;EAN4B,CAAH,CAA9B,CAAP;AAQH;;AAED,OAAO,SAASQ,oBAAT,CAA8BC,aAA9B,EAAoF;EACvF,IAAIC,OAAc,GAAI,kCAAiCjB,YAAY,CAACgB,aAAD,CAAgB,YAAnF;EACA,OAAOf,QAAQ,CAACiB,OAAT,CAAiBD,OAAjB,EAA0BE,IAA1B,CAA+BjB,eAA/B,CAAP;AACH"},"metadata":{},"sourceType":"module"}