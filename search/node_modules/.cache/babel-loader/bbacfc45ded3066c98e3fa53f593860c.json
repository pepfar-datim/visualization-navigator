{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport { Card } from '@dhis2-ui/card';\nimport { Center } from '@dhis2-ui/center';\nimport { Divider } from '@dhis2-ui/divider';\nimport { Layer } from '@dhis2-ui/layer';\nimport { CircularLoader } from '@dhis2-ui/loader';\nimport { MenuItem } from '@dhis2-ui/menu';\nimport { useConfig, clearSensitiveCaches } from '@dhis2/app-runtime';\nimport { colors } from '@dhis2/ui-constants';\nimport { IconSettings24, IconInfo24, IconLogOut24, IconUser24, IconQuestion24 } from '@dhis2/ui-icons';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { joinPath } from '../join-path.js';\nimport i18n from '../locales/index.js';\nimport { ProfileHeader } from './profile-header.js';\n\nconst LoadingMask = () => /*#__PURE__*/React.createElement(Layer, {\n  translucent: true,\n  disablePortal: true,\n  dataTest: \"headerbar-profile-menu-loading-mask\"\n}, /*#__PURE__*/React.createElement(Center, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n\nconst ProfileContents = _ref => {\n  let {\n    name,\n    email,\n    avatarId,\n    helpUrl\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(false);\n  return /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"jsx-2099675810\"\n  }, /*#__PURE__*/React.createElement(ProfileHeader, {\n    name: name,\n    email: email,\n    avatarId: avatarId\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: \"13px 0 7px 0\"\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    \"data-test\": \"headerbar-profile-menu\",\n    className: \"jsx-2099675810\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-user-profile/#/settings'),\n    label: i18n.t('Settings'),\n    value: \"settings\",\n    icon: /*#__PURE__*/React.createElement(IconSettings24, {\n      color: colors.grey700\n    })\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-user-profile/#/account'),\n    label: i18n.t('Account'),\n    value: \"account\",\n    icon: /*#__PURE__*/React.createElement(IconUser24, {\n      color: colors.grey700\n    })\n  }), helpUrl && /*#__PURE__*/React.createElement(MenuItem, {\n    href: helpUrl,\n    label: i18n.t('Help'),\n    value: \"help\",\n    icon: /*#__PURE__*/React.createElement(IconQuestion24, {\n      color: colors.grey700\n    })\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-user-profile/#/aboutPage'),\n    label: i18n.t('About DHIS2'),\n    value: \"about\",\n    icon: /*#__PURE__*/React.createElement(IconInfo24, {\n      color: colors.grey700\n    })\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-commons-security/logout.action') // NB: By MenuItem implementation, this callback\n    // overwrites default navigation behavior but maintains\n    // the href attribute\n    ,\n    onClick: async () => {\n      setLoading(true);\n      await clearSensitiveCaches();\n      setLoading(false);\n      window.location.assign(joinPath(baseUrl, 'dhis-web-commons-security/logout.action'));\n    },\n    label: i18n.t('Logout'),\n    value: \"logout\",\n    icon: /*#__PURE__*/React.createElement(IconLogOut24, {\n      color: colors.grey700\n    })\n  }))), loading && /*#__PURE__*/React.createElement(LoadingMask, null), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2099675810\"\n  }, [\"div.jsx-2099675810{width:100%;padding:0;}\", \"ul.jsx-2099675810{padding:0;margin:0;}\", \"a.jsx-2099675810,a.jsx-2099675810:hover,a.jsx-2099675810:focus,a.jsx-2099675810:active,a.jsx-2099675810:visited{-webkit-text-decoration:none;text-decoration:none;display:block;}\"]));\n};\n\nProfileContents.propTypes = {\n  avatarId: PropTypes.string,\n  email: PropTypes.string,\n  helpUrl: PropTypes.string,\n  name: PropTypes.string\n};\nexport const ProfileMenu = _ref2 => {\n  let {\n    avatarId,\n    name,\n    email,\n    helpUrl\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"headerbar-profile-menu\",\n    className: \"jsx-3620236321\"\n  }, /*#__PURE__*/React.createElement(ProfileContents, {\n    name: name,\n    email: email,\n    avatarId: avatarId,\n    helpUrl: helpUrl\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3620236321\"\n  }, [\"div.jsx-3620236321{z-index:10000;position:absolute;top:34px;right:-6px;width:310px;border-top:4px solid transparent;}\"]));\n};\nProfileMenu.propTypes = {\n  avatarId: PropTypes.string,\n  email: PropTypes.string,\n  helpUrl: PropTypes.string,\n  name: PropTypes.string\n};","map":{"version":3,"names":["_JSXStyle","Card","Center","Divider","Layer","CircularLoader","MenuItem","useConfig","clearSensitiveCaches","colors","IconSettings24","IconInfo24","IconLogOut24","IconUser24","IconQuestion24","PropTypes","React","useState","joinPath","i18n","ProfileHeader","LoadingMask","createElement","translucent","disablePortal","dataTest","ProfileContents","_ref","name","email","avatarId","helpUrl","baseUrl","loading","setLoading","className","margin","href","label","t","value","icon","color","grey700","onClick","window","location","assign","id","propTypes","string","ProfileMenu","_ref2"],"sources":["/home/jake/SRC/visualization-navigator-ts/node_modules/@dhis2-ui/header-bar/build/es/profile/profile-menu.js"],"sourcesContent":["import _JSXStyle from \"styled-jsx/style\";\nimport { Card } from '@dhis2-ui/card';\nimport { Center } from '@dhis2-ui/center';\nimport { Divider } from '@dhis2-ui/divider';\nimport { Layer } from '@dhis2-ui/layer';\nimport { CircularLoader } from '@dhis2-ui/loader';\nimport { MenuItem } from '@dhis2-ui/menu';\nimport { useConfig, clearSensitiveCaches } from '@dhis2/app-runtime';\nimport { colors } from '@dhis2/ui-constants';\nimport { IconSettings24, IconInfo24, IconLogOut24, IconUser24, IconQuestion24 } from '@dhis2/ui-icons';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { joinPath } from '../join-path.js';\nimport i18n from '../locales/index.js';\nimport { ProfileHeader } from './profile-header.js';\n\nconst LoadingMask = () => /*#__PURE__*/React.createElement(Layer, {\n  translucent: true,\n  disablePortal: true,\n  dataTest: \"headerbar-profile-menu-loading-mask\"\n}, /*#__PURE__*/React.createElement(Center, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n\nconst ProfileContents = _ref => {\n  let {\n    name,\n    email,\n    avatarId,\n    helpUrl\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(false);\n  return /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"jsx-2099675810\"\n  }, /*#__PURE__*/React.createElement(ProfileHeader, {\n    name: name,\n    email: email,\n    avatarId: avatarId\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: \"13px 0 7px 0\"\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    \"data-test\": \"headerbar-profile-menu\",\n    className: \"jsx-2099675810\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-user-profile/#/settings'),\n    label: i18n.t('Settings'),\n    value: \"settings\",\n    icon: /*#__PURE__*/React.createElement(IconSettings24, {\n      color: colors.grey700\n    })\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-user-profile/#/account'),\n    label: i18n.t('Account'),\n    value: \"account\",\n    icon: /*#__PURE__*/React.createElement(IconUser24, {\n      color: colors.grey700\n    })\n  }), helpUrl && /*#__PURE__*/React.createElement(MenuItem, {\n    href: helpUrl,\n    label: i18n.t('Help'),\n    value: \"help\",\n    icon: /*#__PURE__*/React.createElement(IconQuestion24, {\n      color: colors.grey700\n    })\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-user-profile/#/aboutPage'),\n    label: i18n.t('About DHIS2'),\n    value: \"about\",\n    icon: /*#__PURE__*/React.createElement(IconInfo24, {\n      color: colors.grey700\n    })\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    href: joinPath(baseUrl, 'dhis-web-commons-security/logout.action') // NB: By MenuItem implementation, this callback\n    // overwrites default navigation behavior but maintains\n    // the href attribute\n    ,\n    onClick: async () => {\n      setLoading(true);\n      await clearSensitiveCaches();\n      setLoading(false);\n      window.location.assign(joinPath(baseUrl, 'dhis-web-commons-security/logout.action'));\n    },\n    label: i18n.t('Logout'),\n    value: \"logout\",\n    icon: /*#__PURE__*/React.createElement(IconLogOut24, {\n      color: colors.grey700\n    })\n  }))), loading && /*#__PURE__*/React.createElement(LoadingMask, null), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2099675810\"\n  }, [\"div.jsx-2099675810{width:100%;padding:0;}\", \"ul.jsx-2099675810{padding:0;margin:0;}\", \"a.jsx-2099675810,a.jsx-2099675810:hover,a.jsx-2099675810:focus,a.jsx-2099675810:active,a.jsx-2099675810:visited{-webkit-text-decoration:none;text-decoration:none;display:block;}\"]));\n};\n\nProfileContents.propTypes = {\n  avatarId: PropTypes.string,\n  email: PropTypes.string,\n  helpUrl: PropTypes.string,\n  name: PropTypes.string\n};\nexport const ProfileMenu = _ref2 => {\n  let {\n    avatarId,\n    name,\n    email,\n    helpUrl\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"headerbar-profile-menu\",\n    className: \"jsx-3620236321\"\n  }, /*#__PURE__*/React.createElement(ProfileContents, {\n    name: name,\n    email: email,\n    avatarId: avatarId,\n    helpUrl: helpUrl\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3620236321\"\n  }, [\"div.jsx-3620236321{z-index:10000;position:absolute;top:34px;right:-6px;width:310px;border-top:4px solid transparent;}\"]));\n};\nProfileMenu.propTypes = {\n  avatarId: PropTypes.string,\n  email: PropTypes.string,\n  helpUrl: PropTypes.string,\n  name: PropTypes.string\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}