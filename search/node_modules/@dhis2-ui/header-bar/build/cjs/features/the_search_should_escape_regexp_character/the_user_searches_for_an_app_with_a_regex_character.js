"use strict";

var _steps = require("cypress-cucumber-preprocessor/steps");

var _common = require("../../__e2e__/stories/common.js");

require("../common/index.js");

(0, _steps.Given)(/some app names contain a (.*)/, character => {
  // Needs to be wrapped, otherwise for some reason the wrong char is in the scope
  cy.wrap(character).then(char => {
    cy.visitStory('HeaderBarTesting', 'With Special App Name Characters'); // verify that there's a module with the special char in its name

    const modulesWithSpecialChar = _common.modulesWithSpecialCharacters.filter(module => {
      return module.displayName.indexOf(char) !== -1;
    });

    expect(modulesWithSpecialChar).to.have.length.of.at.least(1);
  });
});
(0, _steps.Then)(/only apps with (.*) in their name should be shown/, character => {
  cy.get('[data-test="headerbar-apps-menu-list"] > a > div').should($modules => {
    $modules.each((index, module) => {
      const displayName = Cypress.$(module).text();
      expect(displayName.indexOf(character)).to.not.eql(-1);
    });
  });
});