{"ast":null,"code":"import{ContentType,HttpMethod}from\"../../types/http.types\";import{inspectResponse}from\"./inspectResponse.service\";import{mockSendingData}from\"../mock/sendMock.service\";import{getFullUrl,isTestEnv}from\"../config.service\";export function postJson(url,body){return sendData(HttpMethod.post,url,ContentType.json,body);}export function putJson(url,body){return sendData(HttpMethod.put,url,ContentType.json,body);}export function patchJson(url,body){return sendData(HttpMethod.patch,url,ContentType.json,body);}export function postText(url,body){return sendData(HttpMethod.post,url,ContentType.text,body);}export function postEmpty(url){return sendData(HttpMethod.post,url,ContentType.text,null);}function sendData(method,endpoint,contentType,payload){if(isTestEnv())return mockSendingData(endpoint,payload);return fetch(getFullUrl(endpoint),{method:method,credentials:'include',headers:{'Content-Type':contentType},body:contentType===ContentType.json?JSON.stringify(payload):payload}).then(inspectResponse).then(function(apiResponse){if(!apiResponse.success)throw new Error(apiResponse.errorMessage);else return apiResponse;});}","map":{"version":3,"names":["ContentType","HttpMethod","inspectResponse","mockSendingData","getFullUrl","isTestEnv","postJson","url","body","sendData","post","json","putJson","put","patchJson","patch","postText","text","postEmpty","method","endpoint","contentType","payload","fetch","credentials","headers","JSON","stringify","then","apiResponse","success","Error","errorMessage"],"sources":["/home/jake/SRC/landing-page/node_modules/@pepfar-react-lib/datim-api/services/methods/sendData.service.ts"],"sourcesContent":["import {ApiResponse, ContentType, HttpMethod} from \"../../types/http.types\";\nimport {inspectResponse} from \"./inspectResponse.service\";\nimport {mockSendingData} from \"../mock/sendMock.service\";\nimport {getFullUrl, isTestEnv} from \"../config.service\";\n\nexport function postJson(url:string,body:any){\n    return sendData(HttpMethod.post, url,ContentType.json, body);\n}\n\nexport function putJson(url:string,body:any){\n    return sendData(HttpMethod.put, url,ContentType.json, body);\n}\n\nexport function patchJson(url:string,body:any){\n    return sendData(HttpMethod.patch, url,ContentType.json, body);\n}\n\nexport function postText(url:string,body:any){\n    return sendData(HttpMethod.post, url,ContentType.text, body);\n}\n\nexport function postEmpty(url:string){\n    return sendData(HttpMethod.post, url,ContentType.text,null);\n}\n\nfunction sendData(method:HttpMethod,endpoint:string,contentType:ContentType,payload:any):Promise<ApiResponse>{\n    if (isTestEnv()) return mockSendingData(endpoint,payload);\n    return fetch(getFullUrl(endpoint),{\n        method,\n        credentials:'include',\n        headers:{\n            'Content-Type':contentType\n        },\n        body: contentType===ContentType.json?JSON.stringify(payload):payload\n    }).then(inspectResponse).then((apiResponse:ApiResponse)=>{\n        if (!apiResponse.success) throw new Error(apiResponse.errorMessage);\n        else return apiResponse;\n    })\n}\n"],"mappings":"AAAA,OAAqBA,WAArB,CAAkCC,UAAlC,KAAmD,wBAAnD,CACA,OAAQC,eAAR,KAA8B,2BAA9B,CACA,OAAQC,eAAR,KAA8B,0BAA9B,CACA,OAAQC,UAAR,CAAoBC,SAApB,KAAoC,mBAApC,CAEA,MAAO,SAASC,CAAAA,QAAT,CAAkBC,GAAlB,CAA6BC,IAA7B,CAAsC,CACzC,MAAOC,CAAAA,QAAQ,CAACR,UAAU,CAACS,IAAZ,CAAkBH,GAAlB,CAAsBP,WAAW,CAACW,IAAlC,CAAwCH,IAAxC,CAAf,CACH,CAED,MAAO,SAASI,CAAAA,OAAT,CAAiBL,GAAjB,CAA4BC,IAA5B,CAAqC,CACxC,MAAOC,CAAAA,QAAQ,CAACR,UAAU,CAACY,GAAZ,CAAiBN,GAAjB,CAAqBP,WAAW,CAACW,IAAjC,CAAuCH,IAAvC,CAAf,CACH,CAED,MAAO,SAASM,CAAAA,SAAT,CAAmBP,GAAnB,CAA8BC,IAA9B,CAAuC,CAC1C,MAAOC,CAAAA,QAAQ,CAACR,UAAU,CAACc,KAAZ,CAAmBR,GAAnB,CAAuBP,WAAW,CAACW,IAAnC,CAAyCH,IAAzC,CAAf,CACH,CAED,MAAO,SAASQ,CAAAA,QAAT,CAAkBT,GAAlB,CAA6BC,IAA7B,CAAsC,CACzC,MAAOC,CAAAA,QAAQ,CAACR,UAAU,CAACS,IAAZ,CAAkBH,GAAlB,CAAsBP,WAAW,CAACiB,IAAlC,CAAwCT,IAAxC,CAAf,CACH,CAED,MAAO,SAASU,CAAAA,SAAT,CAAmBX,GAAnB,CAA8B,CACjC,MAAOE,CAAAA,QAAQ,CAACR,UAAU,CAACS,IAAZ,CAAkBH,GAAlB,CAAsBP,WAAW,CAACiB,IAAlC,CAAuC,IAAvC,CAAf,CACH,CAED,QAASR,CAAAA,QAAT,CAAkBU,MAAlB,CAAoCC,QAApC,CAAoDC,WAApD,CAA4EC,OAA5E,CAA6G,CACzG,GAAIjB,SAAS,EAAb,CAAiB,MAAOF,CAAAA,eAAe,CAACiB,QAAD,CAAUE,OAAV,CAAtB,CACjB,MAAOC,CAAAA,KAAK,CAACnB,UAAU,CAACgB,QAAD,CAAX,CAAsB,CAC9BD,MAAM,CAANA,MAD8B,CAE9BK,WAAW,CAAC,SAFkB,CAG9BC,OAAO,CAAC,CACJ,eAAeJ,WADX,CAHsB,CAM9Bb,IAAI,CAAEa,WAAW,GAAGrB,WAAW,CAACW,IAA1B,CAA+Be,IAAI,CAACC,SAAL,CAAeL,OAAf,CAA/B,CAAuDA,OAN/B,CAAtB,CAAL,CAOJM,IAPI,CAOC1B,eAPD,EAOkB0B,IAPlB,CAOuB,SAACC,WAAD,CAA2B,CACrD,GAAI,CAACA,WAAW,CAACC,OAAjB,CAA0B,KAAM,IAAIC,CAAAA,KAAJ,CAAUF,WAAW,CAACG,YAAtB,CAAN,CAA1B,IACK,OAAOH,CAAAA,WAAP,CACR,CAVM,CAAP,CAWH"},"metadata":{},"sourceType":"module"}