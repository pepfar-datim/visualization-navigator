{"ast":null,"code":"import{filtersToUrl}from\"../../searchFilters/types/filtersToUrl.service\";import datimApi from\"@pepfar-react-lib/datim-api\";function responseToModel(response){return response.listGrid.rows.map(function(row){return{type:row[4],name:row[1],views:parseInt(row[2]),lastViewed:row[3],owner:row[5],sql:row[6]};});}export function searchVisualizations(searchFilters){var fullUrl=\"/sqlViews/VisNavgSrch/data?var=\".concat(filtersToUrl(searchFilters),\",limit:100\");return datimApi.getJson(fullUrl).then(responseToModel);}","map":{"version":3,"names":["filtersToUrl","datimApi","responseToModel","response","listGrid","rows","map","row","type","name","views","parseInt","lastViewed","owner","sql","searchVisualizations","searchFilters","fullUrl","getJson","then"],"sources":["/home/jake/SRC/visualization-navigator-ts/src/modules/searchPage/services/searchVisualizations.service.ts"],"sourcesContent":["import {ServerResponse, SqlType, Visualization, VisualizationType} from \"../types/visualization.type\";\nimport {SearchFilter} from \"../../searchFilters/types/searchFilters.type\";\nimport {filtersToUrl} from \"../../searchFilters/types/filtersToUrl.service\";\nimport datimApi from \"@pepfar-react-lib/datim-api\";\n\nfunction responseToModel(response:ServerResponse):Visualization[]{\n    return response.listGrid.rows.map(row=>({\n        type: row[4] as VisualizationType,\n        name: row[1],\n        views: parseInt(row[2]),\n        lastViewed: row[3],\n        owner: row[5],\n        sql: row[6] as SqlType\n    }))\n}\n\nexport function searchVisualizations(searchFilters:SearchFilter[]):Promise<Visualization[]>{\n    let fullUrl:string = `/sqlViews/VisNavgSrch/data?var=${filtersToUrl(searchFilters)},limit:100`\n    return datimApi.getJson(fullUrl).then(responseToModel);\n}"],"mappings":"AAEA,OAAQA,YAAR,KAA2B,gDAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CAEA,QAASC,CAAAA,eAAT,CAAyBC,QAAzB,CAAiE,CAC7D,MAAOA,CAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,CAAuBC,GAAvB,CAA2B,SAAAC,GAAG,QAAG,CACpCC,IAAI,CAAED,GAAG,CAAC,CAAD,CAD2B,CAEpCE,IAAI,CAAEF,GAAG,CAAC,CAAD,CAF2B,CAGpCG,KAAK,CAAEC,QAAQ,CAACJ,GAAG,CAAC,CAAD,CAAJ,CAHqB,CAIpCK,UAAU,CAAEL,GAAG,CAAC,CAAD,CAJqB,CAKpCM,KAAK,CAAEN,GAAG,CAAC,CAAD,CAL0B,CAMpCO,GAAG,CAAEP,GAAG,CAAC,CAAD,CAN4B,CAAH,EAA9B,CAAP,CAQH,CAED,MAAO,SAASQ,CAAAA,oBAAT,CAA8BC,aAA9B,CAAoF,CACvF,GAAIC,CAAAA,OAAc,0CAAqCjB,YAAY,CAACgB,aAAD,CAAjD,cAAlB,CACA,MAAOf,CAAAA,QAAQ,CAACiB,OAAT,CAAiBD,OAAjB,EAA0BE,IAA1B,CAA+BjB,eAA/B,CAAP,CACH"},"metadata":{},"sourceType":"module"}